# –°–∏—Å—Ç–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ–∫ –æ–± –æ–±—É—á–µ–Ω–∏–∏

–ü—Ä–æ–µ–∫—Ç –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ–∫ –æ–± –æ–±—É—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ MAX –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Bot** - MAX Bot –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (TypeScript)
- **API** - REST API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (TypeScript, Express)
- **Web** - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å / –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- **PostgreSQL** - –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis** - –ö—ç—à –∏ —Å–µ—Å—Å–∏–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä .env
cp example-env .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env (—É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è)
nano .env
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# API
curl http://localhost:3001/health

# Bot (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start –±–æ—Ç—É –≤ MAX
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
max_bot/
‚îú‚îÄ‚îÄ bot/              # MAX Bot
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ commands/     # –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ handlers/      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ keyboards/    # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ       ‚îú‚îÄ‚îÄ middlewares/   # Middleware
‚îÇ       ‚îú‚îÄ‚îÄ services/       # –°–µ—Ä–≤–∏—Å—ã
‚îÇ       ‚îî‚îÄ‚îÄ i18n/          # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ api/              # REST API
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ config/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ database/      # –ú–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ       ‚îú‚îÄ‚îÄ repositories/  # –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ       ‚îú‚îÄ‚îÄ services/      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ controllers/   # HTTP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ       ‚îú‚îÄ‚îÄ middleware/    # Middleware
‚îÇ       ‚îî‚îÄ‚îÄ routes/        # –ú–∞—Ä—à—Ä—É—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ web/              # Frontend
‚îÇ
‚îî‚îÄ‚îÄ docker-compose.yml
```

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã:
- **Access Token** - –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–π (15 –º–∏–Ω—É—Ç)
- **Refresh Token** - –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π (7 –¥–Ω–µ–π), —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Redis

## üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- **student** - –°—Ç—É–¥–µ–Ω—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫, –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö —Å–ø—Ä–∞–≤–æ–∫)
- **staff** - –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–µ–∫–∞–Ω–∞—Ç–∞ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫)
- **admin** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –∏–ª–∏ –≤–µ–±
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –Ω–∞ —Å–ø—Ä–∞–≤–∫–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–≤–æ–∏—Ö —Å–ø—Ä–∞–≤–æ–∫
- –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –î–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Å–µ–±–µ
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–ø—Ä–∞–≤–æ–∫
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ–∫

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](./ARCHITECTURE.md)
- [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./api/API_DOCUMENTATION.md)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç API](./api/QUICK_START.md)
- [API README](./api/README.md)

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### API

```bash
cd api
npm install
npm run dev  # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

### Bot

```bash
cd bot
npm install
npm run dev  # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–º. `example-env`):

```env
# Database
POSTGRES_DB=bot_max
POSTGRES_USER=admin
POSTGRES_PASSWORD=190340

# Redis
REDIS_URL=redis://redis:6379

# JWT
JWT_SECRET=your-secret-key

# MAX Bot
MAX_BOT_TOKEN=your_max_bot_token
MAX_API_BASE=https://platform-api.max.ru
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã:
- `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `students` - –°—Ç—É–¥–µ–Ω—Ç—ã
- `staff` - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
- `certificates` - –°–ø—Ä–∞–≤–∫–∏

–ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ API.

## üê≥ Docker

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Docker Compose:

- `postgres` - PostgreSQL 15 (–ø–æ—Ä—Ç 5432)
- `redis` - Redis 7 (–ø–æ—Ä—Ç 6379)
- `api` - REST API (–ø–æ—Ä—Ç 3001)
- `bot` - MAX Bot (–ø–æ—Ä—Ç 3002)
- `web` - Frontend (–ø–æ—Ä—Ç 3000)

## üìù API Endpoints

–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –í—Ö–æ–¥
- `POST /api/certificates` - –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É
- `GET /api/certificates/my` - –ú–æ–∏ —Å–ø—Ä–∞–≤–∫–∏
- `GET /api/certificates/pending/list` - –û–∂–∏–¥–∞—é—â–∏–µ (staff/admin)
- `PATCH /api/certificates/:id/status` - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å (staff/admin)

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [API_DOCUMENTATION.md](./api/API_DOCUMENTATION.md)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Health check
curl http://localhost:3001/health

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞
curl -X POST http://localhost:3001/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@test.com","password":"123","role":"student",...}'
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ MAX.
