# MAX Bot - ะกะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ะทะฐัะฒะบะฐะผะธ ะฝะฐ ัะฟัะฐะฒะบะธ

ะกะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ะทะฐัะฒะบะฐะผะธ ะฝะฐ ัะฟัะฐะฒะบะธ ะดะปั ััะตะฑะฝัั ะทะฐะฒะตะดะตะฝะธะน ั ะธะฝัะตะณัะฐัะธะตะน ะฑะพัะฐ MAX, ะฒะตะฑ-ะธะฝัะตััะตะนัะพะผ ะธ REST API.

## ๐ ะะฟะธัะฐะฝะธะต

MAX Bot - ััะพ ะบะพะผะฟะปะตะบัะฝะพะต ัะตัะตะฝะธะต ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ ะฟัะพัะตััะฐ ะฟะพะดะฐัะธ ะธ ะพะฑัะฐะฑะพัะบะธ ะทะฐัะฒะพะบ ะฝะฐ ัะฟัะฐะฒะบะธ ะฒ ััะตะฑะฝัั ะทะฐะฒะตะดะตะฝะธัั. ะกะธััะตะผะฐ ัะพััะพะธั ะธะท ััะตั ะพัะฝะพะฒะฝัั ะบะพะผะฟะพะฝะตะฝัะพะฒ:

- **API Server** - Backend ะฝะฐ Express.js ั PostgreSQL ะดะปั ะพะฑัะฐะฑะพัะบะธ ะฑะธะทะฝะตั-ะปะพะณะธะบะธ
- **MAX Bot** - Telegram/MAX ะฑะพั ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ
- **Web Interface** - React-ะฟัะธะปะพะถะตะฝะธะต ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะทะฐัะฒะบะฐะผะธ ัะตัะตะท ะฒะตะฑ-ะธะฝัะตััะตะนั

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ะะปะธะตะฝัั                               โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โ
โ  โ  MAX Bot     โ  โ Web Interfaceโ  โ  Admin Panel โ  โ
โ  โโโโโโโโฌโโโโโโโโ  โโโโโโโโฌโโโโโโโโ  โโโโโโโโฌโโโโโโโโ  โ
โโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโ
          โ                  โ                  โ
          โ                  โผ                  โ
          โ         โโโโโโโโโโโโโโโโโโ          โ
          โโโโโโโโโโบโ   API Server   โโโโโโโโโโโโ
                    โ  (Express.js)  โ
                    โโโโโโโโโโฌโโโโโโโโ
                             โ
              โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
              โผ                             โผ
    โโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโ
    โ   PostgreSQL    โ          โ      Redis      โ
    โ   (Database)    โ          โ     (Cache)     โ
    โโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโ
```

### ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั:

#### 1. **API Server** (`/api`)
- **ะขะตัะฝะพะปะพะณะธะธ**: Node.js, Express.js, TypeScript
- **ะะฐะทะฐ ะดะฐะฝะฝัั**: PostgreSQL 15
- **ะััะธัะพะฒะฐะฝะธะต**: Redis
- **ะคัะฝะบัะธะธ**:
  - ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ (ัััะดะตะฝัั, ัะพัััะดะฝะธะบะธ, ะฐะดะผะธะฝะธัััะฐัะพัั)
  - CRUD ะพะฟะตัะฐัะธะธ ั ะทะฐัะฒะบะฐะผะธ ะฝะฐ ัะฟัะฐะฒะบะธ
  - JWT ะฐััะตะฝัะธัะธะบะฐัะธั ะธ ะฐะฒัะพัะธะทะฐัะธั
  - ะะฐะณััะทะบะฐ ัะฐะนะปะพะฒ (ัะตััะธัะธะบะฐัั)
  - Swagger ะดะพะบัะผะตะฝัะฐัะธั API

#### 2. **MAX Bot** (`/bot`)
- **ะขะตัะฝะพะปะพะณะธะธ**: Node.js, TypeScript, MAX Bot API
- **ะคัะฝะบัะธะธ**:
  - ะะฝัะตะณัะฐัะธั ั ะฟะปะฐััะพัะผะพะน MAX
  - ะะฒัะพัะธะทะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ัะตัะตะท ะฑะพัะฐ
  - ะกะพะทะดะฐะฝะธะต ะธ ะฟัะพัะผะพัั ะทะฐัะฒะพะบ
  - ะะฝะพะณะพัะทััะฝะพััั (ััััะบะธะน, ะฐะฝะณะปะธะนัะบะธะน)
  - Webhook ะดะปั ะฟะพะปััะตะฝะธั ัะพะพะฑัะตะฝะธะน

#### 3. **Web Interface** (`/web`)
- **ะขะตัะฝะพะปะพะณะธะธ**: React, TypeScript, Vite, TailwindCSS
- **UI ะฑะธะฑะปะธะพัะตะบะฐ**: MAX UI (@maxhub/max-ui)
- **ะคัะฝะบัะธะธ**:
  - ะัะพัะผะพัั ัะฟะธัะบะฐ ะทะฐัะฒะพะบ
  - ะกะพะทะดะฐะฝะธะต ะฝะพะฒัั ะทะฐัะฒะพะบ
  - ะะตัะฐะปัะฝะฐั ะธะฝัะพัะผะฐัะธั ะพ ะทะฐัะฒะบะฐั
  - ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ

#### 4. **Nginx**
- Reverse proxy ะดะปั API ะธ Web
- ะะฐัััััะธะทะฐัะธั ะทะฐะฟัะพัะพะฒ
- ะะพะดะดะตัะถะบะฐ SSL (ะพะฟัะธะพะฝะฐะปัะฝะพ)

## ๐๏ธ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

### Backend
- **Runtime**: Node.js 18
- **Framework**: Express.js
- **Language**: TypeScript
- **Database**: PostgreSQL 15
- **Cache**: Redis 7
- **Auth**: JWT (jsonwebtoken)
- **Validation**: Zod
- **File Upload**: Multer
- **Documentation**: Swagger (swagger-jsdoc, swagger-ui-express)

### Bot
- **Bot Framework**: @maxhub/max-bot-api
- **HTTP Client**: Axios
- **Database**: PostgreSQL (pg)

### Frontend
- **Framework**: React 18
- **Build Tool**: Vite
- **Styling**: TailwindCSS 4
- **UI Components**: @maxhub/max-ui
- **Routing**: React Router DOM 7
- **HTTP Client**: Axios
- **Icons**: Lucide React

### DevOps
- **Containerization**: Docker, Docker Compose
- **Reverse Proxy**: Nginx
- **Process Manager**: Node.js

## ๐ฆ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
max_bot/
โโโ api/                          # Backend API ัะตัะฒะตั
โ   โโโ src/
โ   โ   โโโ config/              # ะะพะฝัะธะณััะฐัะธั (database, swagger)
โ   โ   โโโ controllers/         # ะะพะฝััะพะปะปะตัั ะดะปั ะพะฑัะฐะฑะพัะบะธ ะทะฐะฟัะพัะพะฒ
โ   โ   โโโ database/            # ะะธะณัะฐัะธะธ ะธ ะธะฝะธัะธะฐะปะธะทะฐัะธั ะะ
โ   โ   โโโ middleware/          # Middleware (auth, error, upload)
โ   โ   โโโ repositories/        # ะะตะฟะพะทะธัะพัะธะธ ะดะปั ัะฐะฑะพัั ั ะะ
โ   โ   โโโ routes/              # ะะฐัััััั API
โ   โ   โโโ services/            # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โ   โโโ types/               # TypeScript ัะธะฟั
โ   โ   โโโ index.ts            # ะขะพัะบะฐ ะฒัะพะดะฐ
โ   โโโ public/admin/           # ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ
โ   โโโ Dockerfile
โ   โโโ package.json
โ   โโโ tsconfig.json
โ
โโโ bot/                         # MAX Bot
โ   โโโ src/
โ   โ   โโโ commands/           # ะะพะผะฐะฝะดั ะฑะพัะฐ
โ   โ   โโโ handlers/           # ะะฑัะฐะฑะพััะธะบะธ ัะพะฑััะธะน
โ   โ   โโโ i18n/               # ะะพะบะฐะปะธะทะฐัะธั (ru, en)
โ   โ   โโโ keyboards/          # ะะปะฐะฒะธะฐัััั ะฑะพัะฐ
โ   โ   โโโ middlewares/        # Middleware ะฑะพัะฐ
โ   โ   โโโ services/           # ะกะตัะฒะธัั (API ะบะปะธะตะฝั, ะฐะฒัะพัะธะทะฐัะธั)
โ   โ   โโโ types/              # TypeScript ัะธะฟั
โ   โ   โโโ bot.ts             # ะขะพัะบะฐ ะฒัะพะดะฐ
โ   โโโ Dockerfile
โ   โโโ package.json
โ   โโโ tsconfig.json
โ
โโโ web/                         # React ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ src/
โ   โ   โโโ components/         # React ะบะพะผะฟะพะฝะตะฝัั
โ   โ   โโโ pages/              # ะกััะฐะฝะธัั ะฟัะธะปะพะถะตะฝะธั
โ   โ   โโโ services/           # API ัะตัะฒะธัั
โ   โ   โโโ types/              # TypeScript ัะธะฟั
โ   โ   โโโ App.tsx            # ะะปะฐะฒะฝัะน ะบะพะผะฟะพะฝะตะฝั
โ   โโโ Dockerfile
โ   โโโ package.json
โ   โโโ vite.config.ts
โ   โโโ tsconfig.json
โ
โโโ nginx/                       # ะะพะฝัะธะณััะฐัะธั Nginx
โ   โโโ nginx.conf
โ   โโโ ssl/                    # SSL ัะตััะธัะธะบะฐัั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
โ
โโโ docker-compose.yml          # Docker Compose ะบะพะฝัะธะณััะฐัะธั
โโโ example-env                 # ะัะธะผะตั ัะฐะนะปะฐ .env
```

## ๐ ะัััััะน ััะฐัั

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

ะฃะฑะตะดะธัะตัั, ััะพ ั ะฒะฐั ัััะฐะฝะพะฒะปะตะฝั:
- **Docker** (ะฒะตััะธั 20.10+)
- **Docker Compose** (ะฒะตััะธั 2.0+)
- **Git**

### ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

#### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone <repository-url>
cd max_bot
```

#### 2. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะตะฒะพะน ะดะธัะตะบัะพัะธะธ ะฝะฐ ะพัะฝะพะฒะต `example-env`:

```bash
cp example-env .env
```

ะััะตะดะฐะบัะธััะนัะต `.env` ัะฐะนะป ะธ ัะบะฐะถะธัะต ะฝะตะพะฑัะพะดะธะผัะต ะทะฝะฐัะตะฝะธั:

```env
# Database
POSTGRES_DB=bot_max
POSTGRES_USER=admin
POSTGRES_PASSWORD=your_secure_password_here

# JWT Secret (ะะะฏะะะขะะะฌะะ ะธะทะผะตะฝะธัะต ะฒ production!)
JWT_SECRET=your_jwt_secret_key_change_in_production
JWT_REFRESH_SECRET=your_refresh_secret_key_change_in_production

# MAX Bot (ะฟะพะปััะธัะต ัะพะบะตะฝ ะฝะฐ ะฟะปะฐััะพัะผะต MAX)
MAX_BOT_TOKEN=your_max_bot_token_here
MAX_API_BASE=https://platform-api.max.ru

# Admin User (ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)
ADMIN_EMAIL=admin@test.com
ADMIN_PASSWORD=admin123
```

> โ๏ธ **ะะฐะถะฝะพ**: ะ production ะพะบััะถะตะฝะธะธ ะพะฑัะทะฐัะตะปัะฝะพ ะธะทะผะตะฝะธัะต `JWT_SECRET`, `JWT_REFRESH_SECRET` ะธ ะฟะฐัะพะปะธ ะะ ะฝะฐ ะฑะพะปะตะต ะฑะตะทะพะฟะฐัะฝัะต ะทะฝะฐัะตะฝะธั!

#### 3. ะะฐะฟััะบ ัะตัะตะท Docker Compose

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker-compose up -d

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f

# ะััะฐะฝะพะฒะบะฐ ัะตัะฒะธัะพะฒ
docker-compose down

# ะััะฐะฝะพะฒะบะฐ ั ัะดะฐะปะตะฝะธะตะผ volumes (ะะ)
docker-compose down -v
```

#### 4. ะัะพะฒะตัะบะฐ ัะฐะฑะพัั

ะะพัะปะต ะทะฐะฟััะบะฐ ัะตัะฒะธัั ะฑัะดัั ะดะพัััะฟะฝั ะฟะพ ัะปะตะดัััะธะผ ะฐะดัะตัะฐะผ:

- **Web Interface**: http://localhost:3000
- **API Server**: http://localhost:8080
- **API Documentation (Swagger)**: http://localhost:8080/api-docs
- **Admin Panel**: http://localhost:8080/admin
- **Bot Webhook**: http://localhost:3002
- **PostgreSQL**: localhost:5432
- **Redis**: localhost:6379

#### 5. ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั ัะตัะฒะธัะพะฒ

```bash
# ะัะพะฒะตัะบะฐ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose ps

# Health check API
curl http://localhost:8080/health

# ะัะพะฒะตัะบะฐ ะฟะพะดะบะปััะตะฝะธั ะบ ะะ
docker-compose exec postgres psql -U admin -d bot_max -c "SELECT version();"
```

## ๐ง ะะฐะทัะฐะฑะพัะบะฐ

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ ะฑะตะท Docker

#### API Server

```bash
cd api

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
npm install

# ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
cp ../.env .env

# ะะฐะฟััะบ ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ
npm run dev

# ะกะฑะพัะบะฐ
npm run build

# ะะฐะฟััะบ production ะฒะตััะธะธ
npm start
```

#### Bot

```bash
cd bot

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
npm install

# ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
cp ../.env .env

# ะะฐะฟััะบ ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ
npm run dev

# ะกะฑะพัะบะฐ
npm run build

# ะะฐะฟััะบ production ะฒะตััะธะธ
npm start
```

#### Web

```bash
cd web

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
npm install

# ะะฐะฟััะบ dev ัะตัะฒะตัะฐ
npm run dev

# ะกะฑะพัะบะฐ ะดะปั production
npm run build

# ะัะตะดะฒะฐัะธัะตะปัะฝัะน ะฟัะพัะผะพัั production ัะฑะพัะบะธ
npm run preview
```

### ะะฐะฑะพัะฐ ั ะฑะฐะทะพะน ะดะฐะฝะฝัั

#### ะะพะดะบะปััะตะฝะธะต ะบ PostgreSQL

```bash
# ะงะตัะตะท Docker Compose
docker-compose exec postgres psql -U admin -d bot_max

# ะะฐะฟััะผัั (ะตัะปะธ PostgreSQL ะทะฐะฟััะตะฝ ะปะพะบะฐะปัะฝะพ)
psql -h localhost -U admin -d bot_max
```

#### ะะธะณัะฐัะธะธ

ะะธะณัะฐัะธะธ ะฒัะฟะพะปะฝััััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะทะฐะฟััะบะต API ัะตัะฒะตัะฐ. ะคะฐะนะปั ะผะธะณัะฐัะธะน ะฝะฐัะพะดัััั ะฒ `api/src/database/migrations/`.

ะขะตะบััะธะต ะผะธะณัะฐัะธะธ:
- `001_initial_schema.sql` - ะะฐะทะพะฒะฐั ััะตะผะฐ (ะฟะพะปัะทะพะฒะฐัะตะปะธ, ัััะดะตะฝัั, ัะพัััะดะฝะธะบะธ, ัะฟัะฐะฒะบะธ)
- `002_add_certificate_files.sql` - ะขะฐะฑะปะธัะฐ ัะฐะนะปะพะฒ ัะตััะธัะธะบะฐัะพะฒ

#### ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต ะะ

```bash
# ะกะพะทะดะฐะฝะธะต backup
docker-compose exec postgres pg_dump -U admin bot_max > backup.sql

# ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะธะท backup
docker-compose exec -T postgres psql -U admin bot_max < backup.sql
```

## ๐ API ะะพะบัะผะตะฝัะฐัะธั

### Swagger UI

ะะพัะปะต ะทะฐะฟััะบะฐ API ัะตัะฒะตัะฐ, ะธะฝัะตัะฐะบัะธะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะดะพัััะฟะฝะฐ ะฟะพ ะฐะดัะตัั:
http://localhost:8080/api-docs

### ะัะฝะพะฒะฝัะต ัะฝะดะฟะพะธะฝัั

#### ะััะตะฝัะธัะธะบะฐัะธั

```
POST   /api/auth/login          # ะัะพะด ะฒ ัะธััะตะผั
POST   /api/auth/register       # ะะตะณะธัััะฐัะธั ะฝะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
POST   /api/auth/refresh        # ะะฑะฝะพะฒะปะตะฝะธะต ัะพะบะตะฝะฐ
POST   /api/auth/logout         # ะััะพะด ะธะท ัะธััะตะผั
GET    /api/auth/me            # ะะพะปััะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพ ัะตะบััะตะผ ะฟะพะปัะทะพะฒะฐัะตะปะต
```

#### ะะพะปัะทะพะฒะฐัะตะปะธ

```
GET    /api/users               # ะกะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน (admin)
GET    /api/users/:id          # ะะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต
PUT    /api/users/:id          # ะะฑะฝะพะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
DELETE /api/users/:id          # ะฃะดะฐะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั (admin)
```

#### ะกะฟัะฐะฒะบะธ (Certificates)

```
GET    /api/certificates        # ะกะฟะธัะพะบ ัะฟัะฐะฒะพะบ
POST   /api/certificates        # ะกะพะทะดะฐะฝะธะต ะทะฐัะฒะบะธ ะฝะฐ ัะฟัะฐะฒะบั
GET    /api/certificates/:id    # ะะฝัะพัะผะฐัะธั ะพ ัะฟัะฐะฒะบะต
PUT    /api/certificates/:id    # ะะฑะฝะพะฒะปะตะฝะธะต ัะฟัะฐะฒะบะธ
DELETE /api/certificates/:id    # ะฃะดะฐะปะตะฝะธะต ัะฟัะฐะฒะบะธ
PATCH  /api/certificates/:id/status  # ะะทะผะตะฝะตะฝะธะต ััะฐัััะฐ
```

### ะััะตะฝัะธัะธะบะฐัะธั

API ะธัะฟะพะปัะทัะตั JWT ัะพะบะตะฝั ะดะปั ะฐััะตะฝัะธัะธะบะฐัะธะธ. ะะปั ะดะพัััะฟะฐ ะบ ะทะฐัะธัะตะฝะฝัะผ ัะฝะดะฟะพะธะฝัะฐะผ ะดะพะฑะฐะฒััะต ะทะฐะณะพะปะพะฒะพะบ:

```
Authorization: Bearer <your_jwt_token>
```

## ๐ค ะะฐะฑะพัะฐ ั MAX Bot

### ะะพะผะฐะฝะดั ะฑะพัะฐ

- `/start` - ะะฐัะฐะปะพ ัะฐะฑะพัั ั ะฑะพัะพะผ
- ะัะฑะพั ัะพะปะธ (ัััะดะตะฝั/ะดะตะบะฐะฝะฐั)
- ะัะพัะผะพัั ะทะฐัะฒะพะบ
- ะกะพะทะดะฐะฝะธะต ะฝะพะฒัั ะทะฐัะฒะพะบ

### ะัะพัะตัั ะฐะฒัะพัะธะทะฐัะธะธ

1. ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ัะพะปั (ัััะดะตะฝั/ัะพัััะดะฝะธะบ)
2. ะะพั ะทะฐะฟัะฐัะธะฒะฐะตั ะปะพะณะธะฝ ะธ ะฟะฐัะพะปั
3. ะะพัะปะต ััะฟะตัะฝะพะน ะฐะฒัะพัะธะทะฐัะธะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพะปััะฐะตั ะดะพัััะฟ ะบ ััะฝะบัะธัะผ
4. ะขะพะบะตะฝ ัะพััะฐะฝัะตััั ะดะปั ะฟะพัะปะตะดัััะธั ะทะฐะฟัะพัะพะฒ

### ะะพะบะฐะปะธะทะฐัะธั

ะะพั ะฟะพะดะดะตัะถะธะฒะฐะตั ะดะฒะฐ ัะทัะบะฐ:
- ะัััะบะธะน (`ru.json`)
- ะะฝะณะปะธะนัะบะธะน (`en.json`)

ะคะฐะนะปั ะปะพะบะฐะปะธะทะฐัะธะธ ะฝะฐัะพะดัััั ะฒ `bot/src/i18n/`.

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะดะปั production

1. **ะกะผะตะฝะธัะต ะฒัะต ะฟะฐัะพะปะธ ะธ ัะตะบัะตัั**:
   - `JWT_SECRET`
   - `JWT_REFRESH_SECRET`
   - `POSTGRES_PASSWORD`
   - `ADMIN_PASSWORD`

2. **ะะฐัััะพะนัะต HTTPS**:
   - ะะพะฑะฐะฒััะต SSL ัะตััะธัะธะบะฐัั ะฒ `nginx/ssl/`
   - ะะฑะฝะพะฒะธัะต `nginx/nginx.conf` ะดะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั SSL

3. **ะะฐัััะพะนัะต CORS**:
   - ะะณัะฐะฝะธัััะต ัะฐะทัะตัะตะฝะฝัะต origins ะฒ API

4. **ะัะฟะพะปัะทัะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั**:
   - ะะต ััะฐะฝะธัะต ััะฒััะฒะธัะตะปัะฝัะต ะดะฐะฝะฝัะต ะฒ ะบะพะดะต
   - ะัะฟะพะปัะทัะนัะต `.env` ัะฐะนะปั ะธะปะธ secrets management ัะธััะตะผั

5. **ะะตะณัะปััะฝัะต ะพะฑะฝะพะฒะปะตะฝะธั**:
   - ะะฑะฝะพะฒะปัะนัะต ะทะฐะฒะธัะธะผะพััะธ
   - ะกะปะตะดะธัะต ะทะฐ ััะทะฒะธะผะพัััะผะธ

6. **ะะพะฝะธัะพัะธะฝะณ**:
   - ะะฐัััะพะนัะต ะปะพะณะธัะพะฒะฐะฝะธะต
   - ะัะฟะพะปัะทัะนัะต health checks

## ๐ ะะฐะทะฐ ะดะฐะฝะฝัั

### ะกัะตะผะฐ ะะ

#### ะขะฐะฑะปะธัะฐ `users` (ะะพะปัะทะพะฒะฐัะตะปะธ)
- `id` - ID ะฟะพะปัะทะพะฒะฐัะตะปั
- `email` - Email (ัะฝะธะบะฐะปัะฝัะน)
- `password_hash` - ะฅัั ะฟะฐัะพะปั
- `role` - ะะพะปั (student, staff, admin)
- `first_name`, `last_name`, `middle_name` - ะคะะ
- `phone` - ะขะตะปะตัะพะฝ
- Timestamps: `created_at`, `updated_at`

#### ะขะฐะฑะปะธัะฐ `students` (ะกััะดะตะฝัั)
- `id` - FK ะฝะฐ users.id
- `student_id` - ะะพะผะตั ัััะดะตะฝัะฐ (ัะฝะธะบะฐะปัะฝัะน)
- `group_name` - ะััะฟะฟะฐ
- `faculty` - ะคะฐะบัะปััะตั
- `specialty` - ะกะฟะตัะธะฐะปัะฝะพััั
- `year_of_study` - ะััั (1-6)

#### ะขะฐะฑะปะธัะฐ `staff` (ะกะพัััะดะฝะธะบะธ)
- `id` - FK ะฝะฐ users.id
- `position` - ะะพะปะถะฝะพััั
- `department` - ะะฐัะตะดัะฐ/ะพัะดะตะป

#### ะขะฐะฑะปะธัะฐ `certificates` (ะกะฟัะฐะฒะบะธ)
- `id` - ID ัะฟัะฐะฒะบะธ
- `student_id` - FK ะฝะฐ students.id
- `staff_id` - FK ะฝะฐ staff.id (ะบัะพ ะพะฑัะฐะฑะฐััะฒะฐะตั)
- `type` - ะขะธะฟ ัะฟัะฐะฒะบะธ (enrollment, academic, attendance, graduation, other)
- `status` - ะกัะฐััั (pending, in_progress, ready, issued, rejected, approved, completed)
- `request_data` - JSON ั ะดะฐะฝะฝัะผะธ ะทะฐัะฒะบะธ
- `issued_at` - ะะฐัะฐ ะฒัะดะฐัะธ
- `rejection_reason` - ะัะธัะธะฝะฐ ะพัะบะฐะทะฐ
- `notes` - ะัะธะผะตัะฐะฝะธั

## ๐ ะัะปะฐะดะบะฐ ะธ ัะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### ะัะพะฑะปะตะผั ั Docker

```bash
# ะะตัะตัะพะทะดะฐะฝะธะต ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose up -d --build --force-recreate

# ะัะธััะบะฐ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ ะธ volumes
docker-compose down -v
docker system prune -a

# ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ ะบะพะฝะบัะตัะฝะพะณะพ ัะตัะฒะธัะฐ
docker-compose logs -f api
docker-compose logs -f bot
docker-compose logs -f web
```

### ะัะพะฑะปะตะผั ั ะะ

```bash
# ะัะพะฒะตัะบะฐ ะฟะพะดะบะปััะตะฝะธั ะบ PostgreSQL
docker-compose exec postgres pg_isready

# ะัะพะฒะตัะบะฐ ัััะตััะฒะพะฒะฐะฝะธั ะะ
docker-compose exec postgres psql -U admin -c "\l"

# ะะตัะตัะพะทะดะฐะฝะธะต ะะ (ะะะะะะะะ: ัะดะฐะปะธั ะฒัะต ะดะฐะฝะฝัะต)
docker-compose down -v
docker-compose up -d postgres
```

### ะัะพะฑะปะตะผั ั ะฑะพัะพะผ

- ะัะพะฒะตัััะต ะฟัะฐะฒะธะปัะฝะพััั `MAX_BOT_TOKEN`
- ะฃะฑะตะดะธัะตัั, ััะพ API ัะตัะฒะตั ะทะฐะฟััะตะฝ ะธ ะดะพัััะฟะตะฝ
- ะัะพะฒะตัััะต ะปะพะณะธ: `docker-compose logs -f bot`

### ะัะพะฑะปะตะผั ั API

- ะัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฒ `.env`
- ะฃะฑะตะดะธัะตัั, ััะพ PostgreSQL ะธ Redis ะดะพัััะฟะฝั
- ะัะพะฒะตัััะต Swagger UI ะดะปั ัะตััะธัะพะฒะฐะฝะธั ัะฝะดะฟะพะธะฝัะพะฒ

## ๐ ะขะตััะธัะพะฒะฐะฝะธะต

### API ัะตััะธัะพะฒะฐะฝะธะต ัะตัะตะท curl

```bash
# Health check
curl http://localhost:8080/health

# ะะตะณะธัััะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปั
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "student@example.com",
    "password": "password123",
    "first_name": "ะะฒะฐะฝ",
    "last_name": "ะะฒะฐะฝะพะฒ",
    "role": "student"
  }'

# ะัะพะด
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@test.com",
    "password": "admin123"
  }'
```

## ๐ ะะธัะตะฝะทะธั

[ะฃะบะฐะถะธัะต ะฒะฐัั ะปะธัะตะฝะทะธั]

## ๐ฅ ะะพะฝัะฐะบัั

[ะฃะบะฐะถะธัะต ะบะพะฝัะฐะบัะฝัั ะธะฝัะพัะผะฐัะธั]

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

- [MAX Platform](https://max.ru) - ะะฐ ะฟัะตะดะพััะฐะฒะปะตะฝะธะต ะฟะปะฐััะพัะผั ะดะปั ะฑะพัะพะฒ
- ะัะต contributors ะฟัะพะตะบัะฐ

---

**ะะตััะธั ะดะพะบัะผะตะฝัะฐัะธะธ**: 1.0  
**ะะฐัะฐ ะฟะพัะปะตะดะฝะตะณะพ ะพะฑะฝะพะฒะปะตะฝะธั**: 15 ะฝะพัะฑัั 2025

