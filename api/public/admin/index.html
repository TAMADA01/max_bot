<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель - Система справок</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Экран входа -->
        <div id="login-screen" class="screen active">
            <div class="login-container">
                <h1>Админ-панель</h1>
                <p class="subtitle">Система оформления справок об обучении</p>
                <form id="login-form">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required placeholder="admin@test.com">
                    </div>
                    <div class="form-group">
                        <label for="password">Пароль</label>
                        <input type="password" id="password" name="password" required placeholder="••••••••">
                    </div>
                    <button type="submit" class="btn btn-primary">Войти</button>
                    <div id="login-error" class="error-message"></div>
                </form>
            </div>
        </div>

        <!-- Основной интерфейс -->
        <div id="main-screen" class="screen">
            <header class="header">
                <div class="header-content">
                    <h1>Админ-панель</h1>
                    <div class="header-actions">
                        <span class="user-info" id="user-info"></span>
                        <button id="logout-btn" class="btn btn-secondary">Выйти</button>
                    </div>
                </div>
            </header>

            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="dashboard">Дашборд</button>
                <button class="nav-tab" data-tab="certificates">Справки</button>
                <button class="nav-tab" data-tab="users">Пользователи</button>
            </nav>

            <main class="main-content">
                <!-- Дашборд -->
                <div id="dashboard-tab" class="tab-content active">
                    <h2>Дашборд</h2>
                    <div class="stats-grid" id="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="stat-pending">-</div>
                            <div class="stat-label">Ожидают обработки</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-in-progress">-</div>
                            <div class="stat-label">В процессе</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-ready">-</div>
                            <div class="stat-label">Готовы</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-completed">-</div>
                            <div class="stat-label">Выданы</div>
                        </div>
                    </div>
                </div>

                <!-- Справки -->
                <div id="certificates-tab" class="tab-content">
                    <div class="page-header">
                        <h2>Справки</h2>
                        <button id="refresh-certificates" class="btn btn-secondary">Обновить</button>
                    </div>
                    <div id="certificates-list" class="certificates-list">
                        <div class="loading">Загрузка...</div>
                    </div>
                </div>

                <!-- Пользователи -->
                <div id="users-tab" class="tab-content">
                    <div class="page-header">
                        <h2>Пользователи</h2>
                        <button id="create-user-btn" class="btn btn-primary">Создать пользователя</button>
                    </div>
                    <div id="users-list" class="users-list">
                        <div class="loading">Загрузка...</div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Модальное окно для изменения статуса -->
    <div id="status-modal" class="modal">
        <div class="modal-content">
            <h3>Изменить статус справки</h3>
            <form id="status-form">
                <div class="form-group">
                    <label for="status-select">Новый статус</label>
                    <select id="status-select" name="status" required>
                        <option value="pending">Ожидает</option>
                        <option value="in_progress">В процессе</option>
                        <option value="ready">Готова</option>
                        <option value="issued">Выдана</option>
                        <option value="rejected">Отклонена</option>
                    </select>
                </div>
                <div class="form-group" id="rejection-reason-group" style="display: none;">
                    <label for="rejection-reason">Причина отклонения</label>
                    <textarea id="rejection-reason" name="rejection_reason" rows="3"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-status-btn">Отмена</button>
                    <button type="submit" class="btn btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для создания пользователя -->
    <div id="create-user-modal" class="modal">
        <div class="modal-content">
            <h3>Создать пользователя</h3>
            <form id="create-user-form">
                <div class="form-group">
                    <label for="user-email">Email</label>
                    <input type="email" id="user-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="user-password">Пароль</label>
                    <input type="password" id="user-password" name="password" required>
                </div>
                <div class="form-group">
                    <label for="user-role">Роль</label>
                    <select id="user-role" name="role" required onchange="toggleRoleFields()">
                        <option value="" disabled selected>Выберите роль</option>
                        <option value="student">Студент</option>
                        <option value="staff">Сотрудник</option>
                        <option value="admin">Администратор</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="user-first-name">Имя</label>
                    <input type="text" id="user-first-name" name="first_name" required>
                </div>
                <div class="form-group">
                    <label for="user-last-name">Фамилия</label>
                    <input type="text" id="user-last-name" name="last_name" required>
                </div>
                <div class="form-group">
                    <label for="user-middle-name">Отчество</label>
                    <input type="text" id="user-middle-name" name="middle_name">
                </div>
                <div class="form-group">
                    <label for="user-phone">Телефон</label>
                    <input type="text" id="user-phone" name="phone">
                </div>
                
                <!-- Поля для студента -->
                <div id="student-fields" style="display: none;">
                    <h4 style="margin: 15px 0 10px 0; color: #2563eb; font-size: 16px;">Информация о студенте</h4>
                    <div class="form-group">
                        <label for="user-student-id">Номер студенческого билета *</label>
                        <input type="text" id="user-student-id" name="student_id" placeholder="Например: 20210001">
                    </div>
                    <div class="form-group">
                        <label for="user-group-name">Номер группы *</label>
                        <input type="text" id="user-group-name" name="group_name" placeholder="Например: ИВТ-201">
                    </div>
                    <div class="form-group">
                        <label for="user-faculty">Факультет *</label>
                        <input type="text" id="user-faculty" name="faculty" placeholder="Например: Информационных технологий">
                    </div>
                    <div class="form-group">
                        <label for="user-specialty">Специальность</label>
                        <input type="text" id="user-specialty" name="specialty" placeholder="Например: Программная инженерия">
                    </div>
                    <div class="form-group">
                        <label for="user-year-of-study">Курс</label>
                        <input type="number" id="user-year-of-study" name="year_of_study" min="1" max="6" placeholder="От 1 до 6">
                    </div>
                </div>
                
                <!-- Поля для сотрудника -->
                <div id="staff-fields" style="display: none;">
                    <h4 style="margin: 15px 0 10px 0; color: #2563eb; font-size: 16px;">Информация о сотруднике</h4>
                    <div class="form-group">
                        <label for="user-position">Должность *</label>
                        <input type="text" id="user-position" name="position" placeholder="Например: Декан">
                    </div>
                    <div class="form-group">
                        <label for="user-department">Кафедра *</label>
                        <input type="text" id="user-department" name="department" placeholder="Например: Кафедра информатики">
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-create-user-btn">Отмена</button>
                    <button type="submit" class="btn btn-primary">Создать</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

